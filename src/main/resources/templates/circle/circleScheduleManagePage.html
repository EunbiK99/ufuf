<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.10.7/dayjs.min.js"></script>
    <!--/* 구글폰트(Quicksand, Dongle, Gowun Dodum, Noto Sans Korean) */-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dongle:wght@300&family=Gowun+Dodum&family=Quicksand:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="/public/js/lockLikeMobile.js"></script>
    <link rel="shortcut icon" href="/public/image/commons/logo_fill.png">
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.1.0/uicons-regular-rounded/css/uicons-regular-rounded.css'>
    <script>
        window.addEventListener("DOMContentLoaded", () => {
        let ufufClicked = false; // ufuf 버튼이 클릭되었는지 여부를 나타내는 플래그

        document.getElementById("ufuf").addEventListener("click", function() {
            const container = document.querySelector(".footer");

            if (!ufufClicked) { // ufuf 버튼이 한번도 클릭되지 않았을 때
                // 변경된 스타일 적용
                container.style.boxShadow = "rgba(0,0,0,0.75) 0 0 0 9999px";
                container.style.zIndex = "250";
                container.style.transition = "all 0.2s";

                document.getElementById("home").classList.remove("d-none");
                document.getElementById("secondLine").classList.remove("d-none");
                document.getElementById("thirdLine").classList.remove("d-none");

                setTimeout(() => {
                    document.getElementById("home").classList.add("clicked");
                }, 250);

                setTimeout(() => {
                    document.getElementById("secondLine").classList.add("clicked");
                    setTimeout(() => {
                        document.getElementById("mission").classList.add("clicked");
                    }, 100);
                    setTimeout(() => {
                        document.getElementById("circle").classList.add("clicked");
                    }, 200);

                }, 90);

                setTimeout(() => {

                    document.getElementById("thirdLine").classList.add("clicked");

                    setTimeout(() => {
                        document.getElementById("signal").classList.add("clicked");
                    }, 50);
                    setTimeout(() => {
                        document.getElementById("bnb").classList.add("clicked");
                    }, 250);

                }, 90);
            } else { // ufuf 버튼이 이미 클릭되어 있을 때
                // 변경 취소
                container.style.boxShadow = "none";
                container.style.zIndex = "300";
                container.style.transition = "none";
                

                document.getElementById("home").classList.add("d-none");
                document.getElementById("secondLine").classList.add("d-none");
                document.getElementById("thirdLine").classList.add("d-none");
                document.getElementById("home").classList.remove("clicked");
                document.getElementById("secondLine").classList.remove("clicked");
                document.getElementById("thirdLine").classList.remove("clicked");
                document.getElementById("mission").classList.remove("clicked");
                document.getElementById("circle").classList.remove("clicked");
                document.getElementById("signal").classList.remove("clicked");
                document.getElementById("bnb").classList.remove("clicked");
            }

            ufufClicked = !ufufClicked; // ufufClicked 플래그 업데이트
        });
    });

        // 캘린더..
        

        // window.onload = async function() {
        //     console.log("");
        //     console.log("=========================================");
        //     console.log("[window onload] : [start]");
        //     console.log("=========================================");
        //     console.log(""); 


        //     // [현재 날짜 및 시간 확인]
        //     var korea_date = dayjs(new Date().toLocaleString("en-US", {timeZone: "Asia/Seoul"}));
        //     var format = "YYYY-MM-DDTHH:mm:ss"; // 포맷 타입
        //     var koreaNow = korea_date.format(format);


        //     // [calendar 객체 지정]
        //     var calendarElement = document.getElementById("calendar");


        //     // [full-calendar 생성]
        //     var calendar = new FullCalendar.Calendar(calendarElement, {

        //     events: function (fetchInfo, successCallback, failureCallback) {
        //     // fetchInfo 객체를 통해 시작 날짜, 종료 날짜 등의 정보를 받을 수 있습니다.
        //     // fetchInfo에 따라 서버에 필요한 데이터를 요청할 수 있습니다.
            
        //     const queryString = window.location.search;
        //     const urlParams = new URLSearchParams(queryString);
        //     const circle_id = urlParams.get("circle_id");
            
        //     fetch('./circleScheduleListAll?circle_id=' + circle_id)
        //     .then(response => response.json())
        //     .then(response => {
        //         const eventsData = [];


        //         for(e of response.data){

        //             const changetime = e.start_time;
        //             const postDateTime = new Date(changetime[0], changetime[1] - 1, changetime[2], changetime[3], changetime[4]);
        //             const changetime2 = e.end_time;
        //             const postDateTime2 = new Date(changetime2[0], changetime2[1] - 1, changetime2[2], changetime2[3], changetime2[4]);

        //             // 데이터는 이렇게 넣으면 들어가긴함.
        //             const eventData  = {
        //                 "title": e.schedule_title,
        //                 "start": postDateTime,
        //                 "end": postDateTime2,
        //                 "textColor": "#fb7928",
        //                 "color": "#f7f7f7",
        //                 "extendedProps":{
        //                     schedule_title: e.schedule_title,
        //                     schedule_content: e.schedule_content,
        //                     start_time: postDateTime,
        //                     end_time: postDateTime2,
        //                     participation: e.participation,
        //                     schedule_fee: e.schedule_fee,
        //                     circle_schedule_id: e.circle_schedule_id
        //                 }
        //             }
                    
        //              // 확인용 로그
        //             eventsData.push(eventData);
                    



        //         }
        //         // 성공시 1출력
        //         successCallback(eventsData);
                

        //     })
        //     },

        //     eventClick: function (info) {
        //         // 클릭한 일정의 정보
        //         var eventData = info.event.extendedProps;
        //         var title = eventData['schedule_title'];
        //         var start_time = eventData.start_time;
        //         console.log(eventData);
        //         // 이 부분에서 모달을 띄우는 로직을 추가합니다.
        //         modalScheduleShow(eventData);
        //     },
             
                
        //         slotMinTime: '00:00', // 캘린더에서 일정 시작 시간
        //         slotMaxTime: '23:59', // 캘린더에서 일정 종료 시간

        //         // 해더에 표시할 툴바
        //         headerToolbar: {
        //              // 이전, 다음
        //             //left: 'prev,next,today', // 이전, 다음, 오늘
        //             right: 'prev,today,next' // 중앙 타이틀
        //              // 월, 일
        //             //right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek' // 월, 주, 일, 일정목록
        //         },
        //         buttonText:{
        //             today: '오늘'
        //         },

                
        //         //initialDate: '2023-08-06', // 초기 날짜 설정 (설정하지 않으면 오늘 날짜가 보인다.)
        //         initialView: 'dayGridWeek',
        //         navLinks: true, // 날짜를 선택하면 Day 캘린더나 Week 캘린더로 링크
        //         editable: true, // 수정 가능 여부
        //         selectable: true, // 달력 일자 드래그 설정가능
        //         contentHeight: 600,
        //         expandRows: false,
        //         dayMaxEventRows: true, // 이벤트가 오버되면 높이 제한 (+ 몇 개식으로 표현)
        //         locale: 'ko', // 한국어 설정
        //         selectLongPressDelay:300, // 선택 클릭 발동 시간 
                

        //     })

        //     calendar.render(); 
        // }

        // 캘린더 2 이거 비동기식?
        document.addEventListener('DOMContentLoaded', async function() {
            // console.log("");
            // console.log("=========================================");
            // console.log("[window onload] : [start]");
            // console.log("=========================================");
            // console.log(""); 
            
            // [현재 날짜 및 시간 확인]
            var korea_date = dayjs(new Date().toLocaleString("en-US", {timeZone: "Asia/Seoul"}));
            var format = "YYYY-MM-DDTHH:mm:ss"; // 포맷 타입
            var koreaNow = korea_date.format(format);

            // [calendar 객체 지정]
            var calendarElement = document.getElementById("calendar");

            // [full-calendar 생성]
            var calendar = new FullCalendar.Calendar(calendarElement, {
                events: function (fetchInfo, successCallback, failureCallback) {
                    const queryString = window.location.search;
                    const urlParams = new URLSearchParams(queryString);
                    const circle_id = urlParams.get("circle_id");

                    fetch('./circleScheduleListAll?circle_id=' + circle_id)
                    .then(response => response.json())
                    .then(response => {
                        const eventsData = [];

                        for(e of response.data){
                            const changetime = e.start_time;
                            const postDateTime = new Date(changetime[0], changetime[1] - 1, changetime[2], changetime[3], changetime[4]);
                            const changetime2 = e.end_time;
                            const postDateTime2 = new Date(changetime2[0], changetime2[1] - 1, changetime2[2], changetime2[3], changetime2[4]);

                            const eventData  = {
                                "title": e.schedule_title,
                                "start": postDateTime,
                                "end": postDateTime2,
                                "textColor": "white",
                                "color": "#ff9a42",
                                "extendedProps":{
                                    schedule_title: e.schedule_title,
                                    schedule_content: e.schedule_content,
                                    schedule_address: e.schedule_address,
                                    start_time: postDateTime,
                                    end_time: postDateTime2,
                                    participation: e.participation,
                                    schedule_fee: e.schedule_fee,
                                    circle_schedule_id: e.circle_schedule_id
                                }
                            }
                            
                            eventsData.push(eventData);
                        }
                        successCallback(eventsData);
                    })
                },

                eventClick: function (info) {
                    var eventData = info.event.extendedProps;
                    var title = eventData['schedule_title'];
                    var start_time = eventData.start_time;
                    modalScheduleShow(eventData);
                },
                
                slotMinTime: '00:00',
                slotMaxTime: '23:59',
                headerToolbar: {
                    right: 'prev,today,next'
                },
                buttonText: {
                    today: '오늘'
                },
                initialView: 'dayGridMonth',
                
                navLinks: true,
                editable: true,
                selectable: true,
                expandRows: false,
                dayMaxEventRows: 3, // 날짜별 이벤트 행의 개수 설정 가능
                locale: 'ko',
                selectLongPressDelay: 300,
                aspectRatio: 0.9,
            });

            calendar.render();
             
        });

        

        // 해당 동아리의 일정 리스트
        // !!!!이건 캘린더 밑에 조금 편하게 쓸려고 그냥 임시로 만들어놈!!!!
        // 나중에 일정 밑에는 출석부 같은거 만들거라서 이건 빼는게 맞는듯^^...
        const circleScheduleListAll = () => {

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const circle_id = urlParams.get("circle_id");

            fetch("./circleScheduleListAll?circle_id=" + circle_id)
            .then(response => response.json())
            .then(response => {

                for(e of response.data){

                    //원래는 여기 리스트 출력을시키는

                }
                
            })

        }
        

        // 일정등록 누를시 로케이션 // 동아리번호 + 세션유저번호 = 동아리회원번호
        const scheduleApply = () => {

            

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const circle_id = urlParams.get("circle_id");

            location.href = "./circleScheduleApplyPage?circle_id=" + circle_id;

        }

        function goBack() {
            window.history.go(-1);
        }

        // 검증1 ==> 일정신청을 했는가?
        const circleScheduleApplyCheck = (eventData) => {
            const circle_schedule_id = eventData.circle_schedule_id;
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const circle_id = urlParams.get("circle_id");

            fetch("./circleScheduleAppleyCheck?circle_id=" + circle_id + "&circle_schedule_id=" + circle_schedule_id)
            .then(response => response.json())
            .then(response => {

                if(response.data === true){

                    alert("이미 신청완료되었습니다!");
                    return ;

                }

                //circleScheduleApply(circle_schedule_id); ==> 마지막
                circleSchedulePeopleCheck(eventData); // 검증2로 넘어가자.



            })

        }
        
        // 검증2 ==> 인원수가 전부다 채워졌을경우 ==> 이건 일정 신청이 마지막에 들어간다는 전제하에 넣은 함수
        const circleSchedulePeopleCheck = (eventData) => {

            const circle_schedule_id = eventData.circle_schedule_id;
            const url = "./circleSchedulePeopleCheck?circle_schedule_id=" + circle_schedule_id;

            fetch(url)
            .then(response => response.json())
            .then(response => {

                if(response.data === false){
                    
                    alert("신청인원이 가득 찼습니다.")
                    return ;

                }

                circleScheduleStartTimeCheck(eventData)

            })

        }
        
        // 검증3 ==> 일정시작일이 지나면 신청을 못함
        // 참고) 이건나중에 그냥 버튼막는느낌으로 가도됨!! 모달생성될때 바로 실행되면됨
        const circleScheduleStartTimeCheck = (eventData) => {

            const circle_schedule_id = eventData.circle_schedule_id;
            const url = "./circleScheduleStartTimeCheck?circle_schedule_id=" + circle_schedule_id;

            fetch(url)
            .then(response => response.json())
            .then(response => {

                if(response.data === false){

                    alert("일정신청일이 지났습니다.")
                    return ;
                }
                // 이제 여기서부터 카카오페이 인증 드가자~ itemget
                itemPkget(eventData);
            

            })

        }
        
        // 검증이 끝나고 나서 결제페이지로 이동해서 결제를 완료시킨다음 그 다음에 마지막 해야되는게 scheduleapplication테이블에 삽입이 되야된다는 것이다.
        
        // 모달띄우기 함수
        // ★★★여기서 정보를 가지고 와서 지도를 표시해야됨★★★
        const modalScheduleShow = (eventData) => {

            // 여기서 이제 이벤트데이터를 모달창에 데이터를 입력해서 출력해야됨
            const ScheduleModal = document.querySelector("#ScheduleModal");
            const schedule_title = ScheduleModal.querySelector(".schedule_title");
            schedule_title.innerText = eventData.schedule_title;
            const schedule_content = ScheduleModal.querySelector(".schedule_content");
            schedule_content.innerText = eventData.schedule_content;
            const schedule_address = ScheduleModal.querySelector(".schedule_address");
            schedule_address.innerText = eventData.schedule_address;
            const participation = ScheduleModal.querySelector(".participation");
            participation.innerText = eventData.participation;
            const schedule_fee = ScheduleModal.querySelector(".schedule_fee");
            schedule_fee.innerText = eventData.schedule_fee;
            const start_time = ScheduleModal.querySelector(".start_time");
            const startDummytime = eventData.start_time;
            const formattedDate = startDummytime.toLocaleString('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
            });
            start_time.innerText = formattedDate;
            const end_time = ScheduleModal.querySelector(".end_time");
            const endDummytime = eventData.end_time;
            const formattedDate2 = endDummytime.toLocaleString('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
            });
            end_time.innerText = formattedDate2;
            const sinchung = ScheduleModal.querySelector(".sinchung");
            //sinchung.setAttribute("onclick","circleScheduleApplyCheck("+ eventData.circle_schedule_id +")");
            const eventDataString = JSON.stringify(eventData);
            sinchung.setAttribute("onclick", `circleScheduleApplyCheck(${eventDataString})`);
            // 여기가 &일정신청버튼
            const mapboot = document.querySelector("#map");
            mapboot.innerHTML = "";

            // 여기서 맵을 만들어야할듯?    
            // 주소-좌표 변환 객체를 생성합니다
            const geocoder = new kakao.maps.services.Geocoder();

            // 주소로 좌표를 검색합니다
            // 와.... C-bal 안되서 구조 개조함 (이거 자꾸 화면깨지면서 위치지맘대로 조정되서 개조함)
            geocoder.addressSearch(eventData.schedule_address, function(result, status) {

                // 정상적으로 검색이 완료됐으면 
                if (status === kakao.maps.services.Status.OK) {

                    const coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                    // 결과값으로 받은 위치를 마커로 표시합니다
                    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
                    mapOption = {
                        center: new kakao.maps.LatLng(coords.getLat(), coords.getLng()), // 지도의 중심좌표
                        level: 3 // 지도의 확대 레벨
                    };  
                    
                    // 지도를 생성합니다    
                    var map = new kakao.maps.Map(mapContainer, mapOption); 

                    const marker = new kakao.maps.Marker({
                        map: map,
                        position: coords
                    });

                } 
            }); 
            
            const modal = bootstrap.Modal.getOrCreateInstance("#ScheduleModal");
            modal.show();

        }
        // itemPk를 얻기위한 코드 ==> 이 itemPk를 이용해서 order정보 insert 검증끝나고 실행 상품pk를 가져오는거
        // 여기는 맞음
        const itemPkget = (eventData) => {
            
            const circle_schedule_id = eventData.circle_schedule_id;
            console.log(circle_schedule_id);
            // 일정과 상품은 1:1 구조로 되어있으니까 int값으로 받으면될듯?
            const url = "./itemPkget?circle_schedule_id=" + circle_schedule_id;
            fetch(url)
            .then(response => response.json())
            .then(response => {

                const itemid = response.data;
                eventData.itemid = itemid; //itemid
                orderInfoInsert(eventData);
                console.log(eventData);

            })

        }
        
        // 상품pk를 가져오고 그다음..
        // 여기선 이제 주문정보 insert & scheduleid를 보내서 동아리 맴버정보찾고 유저정보 찾아오자
        const orderInfoInsert = (eventData) => {
        
            // 여기서 주문정보가 이상하게 들어감.. 
            const url = "./orderInfoInsert?item_id=" + eventData.itemid + "&circle_schedule_id=" + eventData.circle_schedule_id;
            fetch(url)
            .then(response => response.json())
            .then(response => {
                // response.data로 주문정보pk + 판매자userpk 받아와서 eventData에 넣으면 됨
                const responseData = response.data
                const schedule_user_id = responseData.schedule_user_id
                const order_id = responseData.order_id
                eventData.schedule_user_id = schedule_user_id;
                eventData.order_id = order_id;
                console.log(response.data);
                kakaoPayment(eventData);
                
                
            })
            
        }

        // 모달로 일정 가져와서 등록
        // 검증 1 => 인원수가 꽉찼을시 불가 / 검증 2 => 일정 시작일되면 일정신청을 못하게 막아야함
        // ★★★(해야될것)중간에 검증 한번들어가야함 !!!!!!!!!!!!!!!!!!!!!===> 이거 검증 한번 더해야됨 내가 지금 일정신청하는곳에 인원수가 5명인데 이미 5명 꽉차면 못들어가게
        // 생각해보니 검증또있음.. ==> 마감일 지나면 일정신청 불가임 disabled 걸어야함

        // 사실 이게 마지막 작업이 되어야함 결제완료 후에 후에 후에 ㅇㅋ? // 이것만 동아리번호랑 schedule_id번호 두개 가져와서 insert 시키면 되긴 함
        // const circleScheduleApply = (circle_schedule_id) => {

        // const queryString = window.location.search;
        // const urlParams = new URLSearchParams(queryString);
        // const circle_id = urlParams.get("circle_id");

        // console.log(circle_schedule_id);
        
        // fetch("./circleScheduleApplyInsert?circle_id=" + circle_id + "&circle_schedule_id=" + circle_schedule_id)
        // .then(response => response.json())
        // .then(response => {

        //     location.href = "./circleScheduleManagePage?circle_id=" + circle_id;

        // })

        // }

        // 결제 요청 페이지 들어갈때 테이블 insert를 해주어야함
        // circle_schedule_id 넘겨준이유 ==> 일정정보 담으려면 필요함
        const kakaoPayment = (eventData) => {
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const circle_id = urlParams.get("circle_id");
            
            // !! 이값이용해서 상품
            const circle_schedule_id = eventData.circle_schedule_id;
            
            const ADMIN_KEY = 'acf98a6391690d5cda02d8dd80ebff6a';  
            const API_URL = 'https://kapi.kakao.com/v1/payment/ready'; // 결제 준비 url
            // const API_URL = './kakaoPaymentInfoInsert'
            // 여기있는 값들을 eventdata를 이용해서 수정시킨다음에 insert시켜야함

            eventData.cid = "TC0ONETIME";
            eventData.item_name = "ufuf일정회비";
            eventData.total_amount = Math.floor(eventData.schedule_fee/eventData.participation);
            // 일정 신청 완료가 되었을때 동아리pk랑 스케쥴pk 보내서 insert시키면 될듯
            eventData.approval_url = `https://localhost:8888/circle/circlePaymentSuccess?partner_order_id=${eventData.order_id}&circle_id=${circle_id}&circle_schedule_id=${circle_schedule_id}`;
            eventData.fail_url = `https://localhost:8888/circle/circlePaymentFail?partner_order_id=${eventData.order_id}`;
            eventData.cancel_url = `https://localhost:8888/circle/circlePaymentCancel?partner_order_id=${eventData.order_id}`;
            console.log(eventData);


            const requestData = new URLSearchParams({
                "cid": eventData.cid,
                "partner_order_id": eventData.order_id, 
                "partner_user_id": eventData.schedule_user_id, 
                "item_name": eventData.item_name,
                "quantity": 1, 
                "total_amount": eventData.total_amount, //이거 소숫점자리 다짜름(생각해야됨!!!);
                "vat_amount": 200, 
                "tax_free_amount": 0, 
                "approval_url": eventData.approval_url,
                "fail_url": eventData.fail_url,
                "cancel_url": eventData.cancel_url
            });  

            // cid 빼고 다때려넣네 ;; 
            // 이건 걍 응답시 받는값이고
            fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-type': 'application/x-www-form-urlencoded', //json으로 안되?
                    'Authorization': `KakaoAK ${ADMIN_KEY}`
                },
                body: requestData 
            })
                .then(response => response.json())
                .then(data => {
                    
                    location.href = data.next_redirect_pc_url //이동
                    kakaoPaymentReqInsert(eventData); // 요청된거 insert
                    kakaoPaymentResInsert(data); //응답된거 insert

                    // 승인요청 들어가야함
                    kakaoPaymentAccept(eventData,data);


                })
                .catch(error => {
                    console.error('Error:', error);
                });
            
        }

        // 카카오페이 결제요청정보 insert
        const kakaoPaymentReqInsert = (eventData) => {
        
            const url = "./kakaoPaymentReqInsert";
            const sendData = {
                "cid": eventData.cid,
                "partner_order_id": eventData.order_id, 
                "partner_user_id": eventData.schedule_user_id, 
                "item_name": eventData.item_name,
                "item_code": eventData.itemid,
                "quantity": 1, 
                "total_amount": eventData.total_amount, //이거 소숫점자리 다짜름(생각해야됨!!!);
                "vat_amount": 200, 
                "tax_free_amount": 0, 
                // "approval_url": eventData.approval_url,
                // "fail_url": eventData.fail_url,
                // "cancel_url": eventData.cancel_url
            }

            fetch(url,{
                method: 'POST',
                headers: {
                    'Content-type': 'application/json'
                },
                body: JSON.stringify(sendData)
            })
            .then(response => response.json())
            .then(response => {



            })

            

        }
        // 카카오페이 결제준비응답 insert
        const kakaoPaymentResInsert = (data) => {

            const url = "./kakaoPaymentResInsert";

            const sendData = {
                tid: data.tid,
                next_redirect_mobile_url: data.next_redirect_mobile_url,
                created_at: data.created_at
            }

            fetch(url,{
                method: 'POST',
                headers: {
                    'Content-type': 'application/json'
                },
                body: JSON.stringify(sendData)
            })
            .then(response => response.json())
            .then(response => {



            })

        }

        // 카카오페이 승인요청을 받아야함
        // 여기가 문제...... 승인요청하면 결제시스템이라 서버측에서 하는게 맞고.. 토큰값은 approval_url 리다이렉트 되면서 생기니까 여기서 값저장 안되는듯?
        const kakaoPaymentAccept = (eventData, data) => {

            const ADMIN_KEY = 'acf98a6391690d5cda02d8dd80ebff6a';
            const restoreData = {
                cid: eventData.cid,
                tid: data.tid,
                partner_order_id: eventData.order_id,
                partner_user_id: eventData.schedule_user_id,
            }
            // 세션값에 담아서 보낸다음에 결제승인요청후에 그값을 저장시키자
            // pg_token을 그럼 null값으로 넣고 해야하는거? 그리고 성공했을때 redirect해서 받아야되는거?

            // 수정코드 ^^..
            const url = "./sessionPaymentInfoRestore";
            fetch(url,{
                method: 'POST',
                headers: {
                    'Content-type': 'application/json'
                },
                body: JSON.stringify(restoreData)
            })
            .then(response => response.json())
            .then(response => {



            })
            
            // const sendData = new URLSearchParams(restoreData);
            // const url = "https://kapi.kakao.com/v1/payment/approve";

            // fetch(url,{
            //     method: 'POST',
            //     headers: {
            //         'Content-type': 'application/x-www-form-urlencoded',
            //         'Authorization': `KakaoAK ${ADMIN_KEY}`

            //     },
            //     body: sendData
            // })
            // .then(response => response.json())
            // .then(response => {

            //     // 일단 여기다 한번 넣어봄 이거 쿼리스트링에 들어가는 값임

            //     //결제 승인 요청, 응답
            //     kakaoPaymentAcceptReqInsert(eventData, data.tid)
            //     kakaoPaymentAcceptResInsert(response.data) //결제수단이 money일때랑 card일때 나눠짐 조심
                

            // })
            // .catch(error => {
            //     console.error('Error:', error);
            // });

        }

        // 카카오페이 승인 요청 테이블 insert ==> 토큰값,,,
        // 1. 결제버튼을 누름 2.(???) 리다이렉트 페이지 전에 결제승인요청과 결제승인응답값을 데이터베이스에 넘겨주어야함(토큰이 필요)  3. 결제완료된 창으로 리다이렉트페이지가 나옴
        const kakaoPaymentAcceptReqInsert = (eventData, tid) => {

            // const queryString = new URLSearchParams(window.location.search);
            // const pg_token = queryString.get('pg_token');
            // console.log(pg_token); 
            // 이거는 결제 완료페이지에서 가져와야하는 token값

            const url = "./kakaoPaymentAcceptReqInsert";
            const sendData = {
                cid: eventData.cid,
                tid: tid,
                partner_order_id: eventData.order_id,
                partner_user_id: eventData.schedule_user_id,
                pg_token: pg_token // ???
            }

            fetch(url,{
                method: 'POST',
                headers: {
                    'Content-type': 'application/json'
                },
                body: JSON.stringify(sendData)
            })
            .then(response => response.json())
            .then(response => {

                

            })

        }
        // 카카오페이 승인 응답 테이블 insert ==> 여기는 CardInfo and AmountInfo 둘다 들어가야함
        const kakaoPaymentAcceptResInsert = () => {

            const sendData = {

            }
            
            const url = "./kakaoPaymentAcceptResInsert";
            fetch(url,{
                method: 'POST',
                headers: {
                    'Content-type': 'application/json'
                },
                body: JSON.stringify(sendData)
            })
            .then(response => response.json())
            .then(response => {
                


            })

        }
        


        // 일정등록할수있는지 여부를 판단 아닐경우 disabled ==> 일정등록할 수 있는 검증 
        const circleScheduleRegister = () =>{

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const circle_id = urlParams.get("circle_id");

            fetch("./circleScheduleRegisterCheck?circle_id=" + circle_id)
            .then(response => response.json())
            .then(response => {

                if(response.data === false){

                    // 아닐경우 
                    const modal = bootstrap.Modal.getOrCreateInstance("#eexModal");
                    modal.show();
                    
                }else{
                    // 맞을경우
                    ScheduleWritePageMove()
                }

            })

        }
        // 리스트 뽑아낼거임 circleAttendance 여기 아직 수정안된부분 해야됨
        const circleAttendanceList = () => {

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const circle_id = urlParams.get("circle_id");

            // ajax 요청응답
            $.ajax({
                url: `./circleAttendanceList?circle_id=${circle_id}`,
                dataType: "json",
                success: (response) => {
                    console.log(response.data);
                    
                    for(e of response.data){

                        // 이정도까지 하고 출석버튼
                        const listWrapper = $("#listWrapper").clone(true)
                        listWrapper.removeClass("d-none");
                        listWrapper.find(".scheduletitle").text(e.circleScheduleDto.schedule_title)
                        listWrapper.find(".scheduleaddress").text(e.circleScheduleDto.schedule_address)
                        listWrapper.find(".participation2").text(`${e.circleScheduleDto.participation}명`)
                        listWrapper.find(".attendanceCheck").attr("onclick",`attendanceModal(${e.circleScheduleDto.circle_schedule_id})`)

                        $("#scheduleListInsert").append(listWrapper)

                    }

                    

                }
            })

        }

        const attendanceModal = (circle_schedule_id) => {
            
            $.ajax({
                url: `./circleAttendanceApplicationList?circle_schedule_id=${circle_schedule_id}`,
                dataType: "json",
                success: (response) => {

                    // 리스팅시키고 모달 보여줌
                    if(response.data.length === 0){

                        $("#attendanceInfoInsert").text("일정신청한 인원이 없습니다.")
                            
                    }
                     
                    for(e of response.data){
                        document.querySelector("#attendanceInfoInsert").innerHTML = "";
                        

                        // 유저이름이름이랑 그냥참여 했는지 안했는지만 체크되면됨
                        // 값만있는경우 []이고 키값은 {}인가봄
                        
                        const attendanceNode = $("#attendanceNode").clone(true)
                        attendanceNode.removeClass("d-none")
                        attendanceNode.find(".username").text(e.userInfoDto.name)
                        // 근데 이 버튼은 만약 출석체크를 했을때 버튼은 출석취소로 나와야함 
                        
                        // N 일때 버튼 주황 Y알때 버튼 레드 어차피 service에서 2일 지나면 사라지게만듬
                        if(e.circleScheduleAttendanceDto.attendance === 'N'){
                            const node = $("<button>").addClass(["btn", "fw-semibold", "attendanceCheck"]).css(
                                {
                                    'background-color': "#fb7928",
                                    "color": "white"
                                }
                            )
                            .text("참여")
                            .attr("onclick", `circleAttendanceChangeY(${e.circleScheduleApplyDto.circle_schedule_application_id})`)
                            attendanceNode.find(".userButton").append(node)
                        }else{
                            const node = $("<button>").addClass(["btn", "fw-semibold", "attendanceCheck"]).css(
                                {
                                    'background-color': "red",
                                    "color": "white"
                                }
                            )
                            .text("불참")
                            .attr("onclick", `circleAttendanceChangeN(${e.circleScheduleApplyDto.circle_schedule_application_id})`)
                            attendanceNode.find(".userButton").append(node)
                        }

                        
                        
                        $("#attendanceInfoInsert").append(attendanceNode)
                        

                    }


                }
            })

            const modal = bootstrap.Modal.getOrCreateInstance("#attendanceModal");
            modal.show();

        }

        const circleBoardWrite = () => {

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const circle_id = urlParams.get("circle_id");

        location.href = "./circleFeedWritePage?circle_id=" + circle_id;

        }

        const circleVoteWrite = () => {

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const circle_id = urlParams.get("circle_id");

        location.href = "./circleVoteWritePage?circle_id=" + circle_id;

        }

        const VoteListPageMove = () => {

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const circle_id = urlParams.get("circle_id");

        location.href = "./circleVoteListPage?circle_id=" + circle_id;
        }

        const ScheduleManageMove = () => {

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const circle_id = urlParams.get("circle_id");

        location.href = "./circleScheduleManagePage?circle_id=" + circle_id;
        }
        const ScheduleWritePageMove = () => {

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const circle_id = urlParams.get("circle_id");

        location.href = "./circleScheduleApplyPage?circle_id=" + circle_id;

        }
        
        const circleAttendanceChangeN = (circle_schedule_application_id) => {

            $.ajax({
                url: `./circleAttendanceChangeN?circle_schedule_application_id=${circle_schedule_application_id}`,
                dataType: "json",
                success: (response) => {

                    location.reload(); // 리로드를 시켜야 다시 출석체크가 되었는지 안되었는지 확인이 가능함.

                }
            })

        }
        
        const circleAttendanceChangeY = (circle_schedule_application_id) => {
            
            // method 안적으면 걍 get방식
            $.ajax({
                url: `./circleAttendanceChangeY?circle_schedule_application_id=${circle_schedule_application_id}`,
                dataType: "json",
                success: (response) => {

                    location.reload();

                }
            })

        }

        window.addEventListener("DOMContentLoaded", () => {
            circleAttendanceList();
        })
        


    </script>
    <style>
        .footer{
        margin: auto;
    }

    #secondLine,
    #thirdLine {
        transition: opacity 1s;
    }

#signal,
    #bnb,
    #mission,
    #circle,
    #home{
        transition: all 0.5s;
        opacity: 0;
    }

    #signal.clicked,
    #bnb.clicked,
    #mission.clicked,
    #circle.clicked,
    #home.clicked {
        opacity: 1;
    }

    .fi {
        background: linear-gradient(to bottom, #ff4a1d, #ff882c, #ffa939); /* 그라데이션 색상 설정 */
        -webkit-background-clip: text; /* 텍스트에만 배경 적용 (WebKit 브라우저를 위한 프리픽스) */
        background-clip: text; /* 텍스트에만 배경 적용 */
        color: transparent; /* 텍스트 색상을 투명하게 설정하여 텍스트가 보이지 않게 함 */
    }

        /* +1 more 링크색글자사이즈 조정 */
        .fc-more-link{
            
            color: #fb7928;
            font-weight: bolder;
            
            font-size: 1.3em;
        }
        /* z-index 1로조정 자꾸 모달창 위로 올라옴 */
        .fc .fc-popover{ 
            z-index: 1;
        }
        .custom-z-index {
            z-index: 10000; /* 필요한 만큼의 높은 z-index 값으로 설정 */
            
        }

        .fixed-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            background-color: #ffffff;
            text-align: center;
        }

        #fc-dom-1{
            padding-left: 1em;
        }

        .fc .fc-button-group > .fc-button{
            background-color: #ececec;
            border: 0.1rem solid #a5a5a5;
            color: #282828;
        }

        .fc-button-group{
            padding-right: 1em;
        }

        /* [컨테이너 크기 설정] */
        
        *{
            font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Pretendard Variable", Pretendard, Roboto, "Noto Sans KR", "Segoe UI", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
        }
        .fc {
            font-family: 'Arial', sans-serif;
            background-color: #ffffff;
            color: #3e3e3e;
            font-size: 0.7em;
            text-decoration: none;
            /* 기타 스타일 설정 */
        }
        
        .fc-daygrid-day-number{
            text-decoration: none;
            color: rgb(58, 58, 58);
        }

        .fc-scrollgrid-section-header{
            background-color: #fafafa;
        }

        .fc-col-header-cell-cushion{
            text-decoration: none;
            color: rgb(39, 39, 39);
        }
        .fc-daygrid-event {
            background-color: #fb7928; /* 이벤트의 배경색을 변경 */
            color: white; /* 이벤트의 텍스트 색상을 변경 */
            padding-right: 0;
        }
        .fc-daygrid-event-dot {
            display: none !important;
        }
        .fc-daygrid-event-harness{
            padding-right: 0;
            margin-right: 0;
        }
        .fc-event-time{
            font-weight: bold;
        }
        .fc-event-title{
            font-weight: bolder;
        }
        .fc-event:hover {
            background-color: initial;
            color: initial;
        }
        .fc-event:active {
            background-color: initial;
            color: initial;
        }
        #calendar{
            padding-top: 1em;
            width: 100%;
        }
        
    </style>
</head>
<body style="background-color: #fafafa;">
    <th:block th:replace="~{commons/circlefragmentPage.html :: topNavi}"></th:block>
    <div class="container-fluid">
        <div class="row border-top">
            <div id="calendar" class="col px-0 pt-3" style="height: 80vh;">

            </div>
        </div>
        <!-- 생각을 해보자.. 일정출석부는 일정 마감일이 지나고 나서 이틀정도 기한을 준다고 했고 출석부는 일정등록을 한 본인만 출석체크를 할 수 있다.
             일정시작일 기준으로 일정출석부는 생길것이고 일정출석부가 보이는 기간은 일정마감일 기준으로 2일동안 근데 여기서 일정 출석부가 보여야 하는건 등록한사람만 -->
        <div class="row fixed-bottom border-top" style="bottom: 3.4rem;">
            <div id="scheduleListInsert" class="col" style="padding-top: 0.5rem; padding-bottom: 0.6rem;">

            </div>
        </div>
    </div>
    <div class="row pb-2" style="position: fixed; bottom: 6em; right: 0; height: 3em; z-index: 100;">
        <div class="col ps-0 pt-2 mt-1 pe-0 me-0">
            <div class="dropup-end dropup" style="position: absolute; right: 2em;">
                <button class="btn rounded-circle shadow" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: #FF8827;">
                    <i class="fs-4 bi bi-plus-lg text-white"></i>
                </button>
                <ul class="dropdown-menu mb-2" style=" z-index: 1000;">
                    <li onclick="circleScheduleRegister()"><span class="dropdown-item text-secondary" style="font-size: 0.9em;"> 일정 추가</li>
                    <li onclick="circleVoteWrite()"><span class="dropdown-item text-secondary" style="font-size: 0.9em;"> 투표글 작성</li>
                    <li onclick="circleBoardWrite()"><span class="dropdown-item text-secondary" style="font-size: 0.9em;"> 동아리 게시글 작성</span></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container-fluid footer" style="position: absolute;">
        <div class="row fixed-bottom align-items-center justify-content-center" style="border-top: 0.05em solid rgb(196, 196, 196); height: 3.4em;">
            <div class="button col text-center" onclick="ScheduleManageMove()" style="height: 100%;">
                <div class="row">
                    <div class="col">
                        <i class="bi bi-calendar2-date" style="font-size: 1.7em;"></i>
                    </div>
                </div>
                <div class="row">
                    <div class="col" style="font-size: 0.6em;">
                        일정
                    </div>
                </div>
            </div>
            <div class="button col ps-0 text-center" onclick="VoteListPageMove()" style="height: 100%;">
                <div class="row">
                    <div class="col">
                        <i class="bi bi-box-seam-fill" style="font-size: 1.7em;"></i>
                    </div>
                </div>
                <div class="row">
                    <div class="col" style="font-size: 0.6em;">
                        투표
                    </div>
                </div>
            </div>
            <div class="col-2 px-0 justify-content-center">
                <img id="ufuf" class="img-fluid" src="/public/image/circle/ufufmainlogo.png" style="height: 2.8em;">
                <!-- 여기 플러스버튼을 따로 떼어내서 이동시켜야함 !!!!!! -->
                <!-- <button class="btn px-0" onclick="openModal()"><i class="bi bi-plus-circle py-0 fs-1"></i></button> -->
            </div>
            <div class="button col text-center pe-0" onclick="(() => {
                location.href = './myCircleListPage'
            })()" style="height: 100%;">
            <div class="row">
                <div class="col">
                    <i class="bi bi-people-fill" style="font-size: 1.7em;"></i>
                </div>
            </div>
            <div class="row">
                <div class="col" style="font-size: 0.6em;">
                    내 동아리
                </div>
            </div>
            </div>
            <div class="button col text-center" onclick="(() => {
                location.href = './circleMyPage'
            })()" style="height: 100%;">
            <div class="row">
                <div class="col">
                    <i class="bi bi-person-circle" style="font-size: 1.7em;"></i>
                </div>
            </div>
            <div class="row">
                <div class="col" style="font-size: 0.6em;">
                    마이페이지
                </div>
            </div>
            </div>
            <!-- <div style="position: fixed; bottom: 10%; z-index: 1000;">      
                <div class="dropup-end dropup mb-3 justify-content-center" style="position: relative; left: 42%;">
                    <button class="btn rounded-circle shadow" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: #FF8827;">
                        <i class="fs-4 bi bi-plus-lg text-white"></i>
                    </button>
                    <ul class="dropdown-menu mb-2" style="z-index: 1000;">
                        <li onclick="ScheduleWritePageMove()"><span class="dropdown-item text-secondary" style="font-size: 0.9em;"> 일정 추가</li>
                      <li onclick="circleVoteWrite()"><span class="dropdown-item text-secondary" style="font-size: 0.9em;"> 투표글 작성</li>
                      <li onclick="circleBoardWrite()"><span class="dropdown-item text-secondary" style="font-size: 0.9em;"> 동아리 게시글 작성</span></li>
                    </ul>
                </div>
            </div> -->
        </div>
    </div>
    <div id="Wrapper d-none">
    <div id="ScheduleModal" class="modal" tabindex="-1">
        <div class="modal-dialog custom-z-index" style="margin-right: 5%; margin-left: 5%;">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">일정 상세설명</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body align-items-center justify-content-center">
                <div class="row">
                    <div class="col">
                        <span class="schedule_title fw-semibold" style="font-size: 1.2em;"></span>
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col">
                        <span class="schedule_content"></span>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col align-items-center justify-content-center">
                        <i class="bi bi-people-fill"></i>&nbsp;&nbsp;<span style="font-size: 1em;">인원</span>&nbsp;<span class="participation fw-semibold" style="color: #fb7928; font-size: 1em;"></span><span style="font-size: 1em;">명</span>
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col align-items-center justify-content-center">
                        <i class="bi bi-tags-fill"></i>&nbsp;&nbsp;<span class="participation fw-semibold" style="color: #fb7928; font-size: 1em;"></span><span style="font-size: 1em;">총회비</span>&nbsp;<span class="schedule_fee fw-semibold" style="color: #fb7928; font-size: 1em;"></span><span style="font-size: 1em;">원</span>
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col align-items-center justify-content-center">
                        <i class="bi bi-alarm-fill"></i>&nbsp;&nbsp;<span class="start_time" style="font-size: 1em;"></span>&nbsp;&nbsp;-&nbsp;&nbsp;<span class="end_time" style="font-size: 1em;"></span>
                    </div>
                </div>
                <div class="row mt-1">
                    <div class="col align-items-center justify-content-center">
                        <i class="bi bi-geo-alt-fill"></i>&nbsp;&nbsp;<span class="schedule_address" style="font-size: 1em; color: #282828;"></span>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col px-0"><!-- 일정에 주소좌표가 들어갈 예정 --> 
                        <div id="map" style="width: 100%; height: 20.2em;"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn fw-semibold sinchung" style="background-color: #fb7928;color: white;">일정 신청</button>
              <button type="button" class="btn btn-secondary fw-semibold" data-bs-dismiss="modal" style="color: white;">닫기</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="listWrapper" class="row d-none px-3">
        <div class="col text-start">
            <div class="row">
                <div class="col scheduletitle fw-semibold pe-0" style="font-size: 1.07em;">
                    
                </div>
            </div>
            <div class="row" style="margin-top: -0.18rem;">
                <div class="col scheduleaddress pe-0" style="font-size: 0.8em; color: rgb(172, 172, 172);">
                    
                </div>
            </div>
            <div class="row">
                <div class="col fw-semibold">
                    <span style="color: #858585; font-size: 0.9rem;">일정 전체 인원</span><span class="participation2 ms-2" style="font-size: 0.95em; color: rgb(102, 102, 102);"></span>
                </div>
            </div>
        </div>
        <div class="col-4 d-grid align-items-center">
            <button type="button" class="btn fw-semibold attendanceCheck align-items-center ps-1" style="background-color: #fb7928;color: white; height: 2.5rem;"><i class="bi bi-plus me-1"></i>출석체크</button>
        </div>
    </div>

    <div id="attendanceWrapper d-none">
        <div id="attendanceModal" class="modal" tabindex="-1" style="border: none;">
            <div class="modal-dialog modal-dialog-bottom" style="padding-top: 50%; margin-right: 5%; margin-left: 5%;">
              <div class="modal-content px-0 py-0">
                <div class="modal-header">
                  <h5 class="modal-title">일정 출석부</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body pb-0">
                    <div class="row">
                        <div id="attendanceInfoInsert" class="col align-items-center justify-content-center">
                            <!-- 리스팅 되어야할 곳 -->
                            
                        </div>
                    </div>
                    <div class="row mt-3 text-end">
                        <div class="col" style="font-size: 0.8em;">
                            일정 출석 기한은 일정 종료일로부터 2일입니다.
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="text-decoration-line: none;">
                  <button type="button" class="btn btn-secondary fw-semibold" data-bs-dismiss="modal" style="color: white;">닫기</button>
                </div>
              </div>
            </div>
        </div>
    </div>
    <!-- 여기는 이제 일정 출석부에 추가해야할 클론노드 -->
    <div id="attendanceNode" class="row mt-1 d-none justify-content-center align-items-center">
        <div class="col">
            <div class="row">
                <div class="col text-center username fs-5">

                </div>
            </div>
        </div>
        <div class="col-5 d-grid userButton">
            
        </div>
    </div>
    
    <!-- 또 출석체크 누르면 모달창 만들어야 함 -->
    <!-- 라이브러리 쓰려면 라이브러리 추가한거사용하면됨 7319aff03174c9825e5552818af66d19 -->
    <div id="home" class="row d-flex justify-content-center d-none" style="position: fixed; bottom: 8em; width: 100%; margin: auto; z-index: 9999;">
        <div class="col text-center px-0 ">
            <div class="row">
                <div class="col px-0 align-self-center d-flex justify-content-center">
                    <span class="btn rounded-circle bg-white d-flex justify-content-center border-0 align-self-center" 
                        style="color: #616161; height: 2.3em; width: 2.3em; box-shadow: 0 0 0.1rem 0.1rem #dddddd;" onclick="window.location.href='../commons/mainPage'">
                        <i class="fi fi-rr-house-chimney align-middle fs-4"></i>
                    </span>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col px-0 text-center fw-light" style="color: #ffffff; font-size: 0.6rem;">
                    홈
                </div>
            </div>
        </div>
    </div>
    
    <div id="secondLine" class="row d-flex justify-content-center d-none" style="position: fixed; bottom: 6.8em; width: 100%; margin: auto; z-index: 9999;">
        <div id="mission" class="col-2 text-center">
            <div class="row">
                <div class="col px-0 align-self-center d-flex justify-content-center">
                    <span class="btn rounded-circle bg-white d-flex justify-content-center border-0 align-self-center" 
                        style="color: #616161; height: 2.3em; width: 2.3em; box-shadow: 0 0 0.1rem 0.1rem #dddddd;" onclick="window.location.href='../mission/map'">
                        <i class="fi fi-rr-map-marker align-middle fs-4"></i>
                    </span>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col px-0 text-center fw-light" style="color: #ffffff; font-size: 0.6rem;">
                    유니미션
                </div>
            </div>
        </div>
        <div class="col-1" style="width: 2.8em;" onclick="window.location.href='../commons/mainPage'"></div>
        <div id="circle" class="col-2 text-center">
            <div class="row">
                <div class="col px-0 align-self-center d-flex justify-content-center">
                    <span class="btn rounded-circle bg-white d-flex justify-content-center border-0 align-self-center" 
                        style="color: #616161; height: 2.3em; width: 2.3em; box-shadow: 0 0 0.1rem 0.1rem #dddddd;" onclick="window.location.href='../circle/circleMainPage'">
                        <i class="fi fi-rr-meeting align-middle fs-4"></i>
                    </span>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col px-0 text-center fw-light" style="color: #ffffff; font-size: 0.6rem;">
                    유니써클
                </div>
            </div>
        </div>
    </div>

    <div id="thirdLine" class="row d-flex justify-content-center d-none" style="position: fixed; bottom: 4.3em; width: 100%; margin: auto; z-index: 9999;">
        <div id="signal" class="col-3 text-center">
            <div class="row">
                <div class="col px-0 align-self-center d-flex justify-content-center">
                    <span class="btn rounded-circle bg-white d-flex justify-content-center border-0 align-self-center" 
                        style="color: #616161; height: 2.3em; width: 2.3em; box-shadow: 0 0 0.1rem 0.1rem #dddddd;" onclick="window.location.href='../meeting/mainPage'">
                        <i class="fi fi-rr-comment-heart align-middle fs-4"></i>
                    </span>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col px-0 text-center fw-light" style="color: #ffffff; font-size: 0.6rem;">
                    유니시그널
                </div>
            </div>
        </div>
        <div class="col-1" style="width: 6.1rem;"></div>
        <div id="bnb" class="col-3 text-center">
            <div class="row">
                <div class="col px-0 align-self-center d-flex justify-content-center">
                    <span class="btn rounded-circle bg-white d-flex justify-content-center border-0 align-self-center" 
                            style="color: #616161; height: 2.3em; width: 2.3em; box-shadow: 0 0 0.1rem 0.1rem #dddddd;" onclick="window.location.href='../room/roomMainPage'">
                        <i class="fi fi-rr-bed-alt align-middle fs-4"></i>
                    </span>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col px-0 text-center fw-light" style="color: #ffffff; font-size: 0.6rem;">
                    유니비앤비
                </div>
            </div>
        </div>
    </div>
    <div id="eexWrapper d-none">
        <div id="eexModal" class="modal" tabindex="-1" style="border: none;">
            <div class="modal-dialog modal-dialog-bottom" style="padding-top: 50%; margin-right: 5%; margin-left: 5%;">
              <div class="modal-content px-0 py-0">
                <div class="modal-header">
                  <h5 class="modal-title">일정 등급 제한</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col">
                            동아리장 또는 관리자만 일정을 등록할 수 있습니다.
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="text-decoration-line: none;">
                  <button type="button" class="btn btn-secondary fw-semibold" data-bs-dismiss="modal" style="color: white;">닫기</button>
                </div>
              </div>
            </div>
        </div>
    </div>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=d278507abdfac919df6a68d06b328eaf&libraries=services"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>
</html> 