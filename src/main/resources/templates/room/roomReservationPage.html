<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>게스트하우스 예약하기</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
          function reservationFormSubmit() {
            const reservationSubmit=document.getElementById("reservationSubmit");
            
            //인원수
            const guestCount=document.getElementById("guestCount");
            if(guestCount.value==''){
                alert("인원수를 입력해 주세요.");
                guestCount.focus();
                return;
            }
            
            //예약가능일정(시작)
            const startSchedule=document.getElementById("startSchedule");
            if(startSchedule.value==''){
                alert("예약 일정을 입력해 주세요.");
                startSchedule.focus();
                return;
            }

            //예약가능일정(끝)
            const endSchedule=document.getElementById("endSchedule");
            if(endSchedule.value==''){
                alert("예약 일정을 입력해 주세요.");
                endSchedule.focus();
                return;
            }

            reservationSubmit.submit();
        }

        function checkSchedule() {
            const startScheduleInput = document.getElementById("startSchedule");
            const endScheduleInput = document.getElementById("endSchedule");

            // 값이 비어있는지 확인
            if (startScheduleInput.value === '' || endScheduleInput.value === '') {
                alert("날짜를 입력해 주세요.");
                return;
            }

            // 날짜 형식인지 확인
            const startSchedule = new Date(startScheduleInput.value);
            const endSchedule = new Date(endScheduleInput.value);

            // 시작 날짜가 종료 날짜보다 늦으면
            if (startSchedule > endSchedule) {
                // 알림 메시지 출력
                alert("일정을 다시 확인 해주세요.");

                // 입력값 초기화
                startScheduleInput.value = "";
                endScheduleInput.value = "";
                startScheduleInput.focus();
            }
        }
    </script>
</head>

<body>
    
    <div class="container">
        <!-- 페이지 네비-->
        <div class="row border-bottom border-secondery-subtle pt-4 pb-2 bg-white" style="position: fixed; top: 0; width: 100%; z-index: 1000;">
            <!--뒤로가기-->
            <div class="col-1">
                <a th:href="@{./roomDetailPage(room_info_id=${roomInfo.roomInfoDto.room_info_id})}" style="color: black; text-decoration: none;"><i class="bi bi-x-lg text-secondary"></i></a> 
            </div>
 
            

            <!--무슨페이지인지 알 수 있게-->
            <div class="col text-center fw-bold text-secondary mt-1 fs-5">예약하기</div>
            <div class="col-1"></div> 
        </div>
        <!--여백-->
        <div class="row p-4 mt-4"></div>

        <div class="row mx-2 fw-bold mt-3" th:text="${roomInfo.roomInfoDto.title}"></div>

        
        <!--정보 입력-->
        <form id="reservationSubmit" action="/room/roomReservationProcess" method="post">
            <div class="row mt-3">
                <div class="col">

                    <input type="hidden" name="room_info_id" th:value="${roomInfo.roomInfoDto.room_info_id}">
                    <!--인원-->
                    <div class="row mt-4 ms-2 fw-bold text-secondary">예약 인원</div>
                    <div class="row">
                        <div class="col mx-2 me-0 mt-2">
                            <input id="guestCount" type="number" name="guest_count" class="form-control">
                        </div>
                        <div class="col ms-0 mt-3 text-secondary">명</div>
                    </div>

                    <!--일정-->
                    <div class="row mt-4 ms-2 fw-bold text-secondary">예약 일정</div>
                    <div class="row">
                        <div class="col-5 mx-2 mt-2"><input id="startSchedule" type="date" name="start_reservation_schedule" class="form-control"></div>
                        <div class="col-1 fs-5 fw-bold text-secondary pt-2">~</div>
                        <div class="col-5 mx-2 mt-2"><input onblur="checkSchedule()" id="endSchedule" type="date" name="end_reservation_schedule" class="form-control"></div>
                    </div>

                    <div class="fixed-bottom bg-white">
                        <div class="row text-center pb-2 border-top border-secondery-subtle">
                            <div class="col d-grid mx-2 mt-2 mb-4">
                                <input onclick="reservationFormSubmit()" class="btn text-white fw-bold py-2" style="background-color: #FF8827;" value="예약하기">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <!--여백-->
        <div class="row p-4 mb-5"></div>

    </div>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>

</html>